{
  "_base_entry": "cmdgen:05ee58d2d664fb59",
  "_base_entry#": "cmdgen.benchmark.inference.qaic-loadgen",
  "accu_init": {
    "ck_env": [
      "--env.ML_MODEL_MODEL_NAME=bert",
      "--env.CK_ENV_QAIC_MODEL_BATCH_SIZE=<<<override_batch_size>>>",
      "--env.CK_LOADGEN_DATASET_SIZE=<<<dataset_size>>>",
      "--env.CK_ENV_QAIC_DEVICE_IDS=<<<device_ids>>>",
      "--env.CK_ENV_QAIC_INPUT_SELECT=<<<input_select>>>",
      "--env.CK_ENV_QAIC_QUEUE_LENGTH=<<<queue_length>>>",
      "--env.CK_ENV_QAIC_THREADS_PER_QUEUE=<<<threads_per_queue>>>",
      "--env.CK_VERBOSE=<<<verbosity>>>",
      "--env.ML_MODEL_MODEL_NAME=bert",
      "--env.CK_ENV_QAIC_ACTIVATION_COUNT=<<<activation_count>>>"
    ],
    "deps": [
      "--dep_add_tags.dataset-tokenized=dataset,squad,tokenized,raw"
    ],
    "record_tags": [
      "task.bert-question-answering"
    ],
    "record_uoa_parts": [
      "<<<mode>>><<<mode_extension>>>"
    ]
  },
  "build_map": {
    "sut": {
      "aedk_15w": {
        "recommended_activation_count": "4",
        "recommended_batch_size": "1000"
      },
      "aedk_20w": {
        "recommended_activation_count": "4",
        "recommended_batch_size": "1000"
      },
      "aedk_25w": {
        "recommended_activation_count": "4",
        "recommended_batch_size": "1000"
      },
      "g292_z43_q16": {
        "recommended_activation_count": "4",
        "recommended_batch_size": "1000"
      },
      "r282_z93_q1": {
        "recommended_activation_count": "4",
        "recommended_batch_size": "1000"
      },
      "r282_z93_q5": {
        "recommended_activation_count": "4",
        "recommended_batch_size": "1000"
      },
      "r282_z93_q8": {
        "recommended_activation_count": "4",
        "recommended_batch_size": "1000"
      }
    },
    "model": {
      "bert-99.9": {
        "model_tags": [
          "bert-99.9"
        ]
      },
      "bert-99": {
        "model_tags": [
          "bert-99",
          "quantization.calibration"
        ]
      }
    },
    "scenario": {
      "offline": {
        "activation_count": "<<<recommended_activation_count>>>",
        "batch_size": "<<<recommended_batch_size>>>",
        "input_select": "<<<recommended_input_select>>>"
      },
      "range_singlestream": {
        "activation_count": "1",
        "batch_size": "1",
        "input_select": "0"
      },
      "server": {
        "activation_count": "<<<recommended_activation_count>>>",
        "batch_size": "<<<recommended_batch_size>>>",
        "input_select": "0"
      },
      "singlestream": {
        "activation_count": "1",
        "batch_size": "1",
        "input_select": "<<<recommended_input_select>>>"
      }
    }
  },
  "docker": {
    "container_only": {
      "wrapped_ck_benchmark_program": "if [ \"<<<model_name>>>\" != \"bert\" ]; then echo \"Please enter the model name to build the Docker image for(bert)\n\";  else CONTAINER_ID=<<<container>>> && <<<docker_exec_command>>> $CONTAINER_ID <<<docker_bash_command>>> \"echo -e 'sdk=<<<sdk>>>\nmodel_name=<<<model_name>>>' > <<<docker_config>>>\" && echo ${CONTAINER_ID}; fi"
    }
  },
  "defaults": {
    "cache_dir_default": "/data/packed-bert.qaic-loadgen.cache",
    "docker_preprocess_dir": "/home/krai/CK_REPOS/ck-qaic/program/packed-bert-qaic-loadgen/tmp/preprocessed",
    "max_wait": "50000",
    "model_name": "bert",
    "override_batch_size": "<<<batch_size>>>",
    "program_name": "packed-bert-qaic-loadgen",
    "recommended_input_select": "0",
    "queue_length": "8",
    "threads_per_queue": "8"
  }
}
