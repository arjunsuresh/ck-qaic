{
  "check_exit_status": "yes",
  "customize": {
    "install_env": {
      "MODEL_NAME": "converted_model",
      "PACKAGE_VERSION": "1",
      "QAIC_TOOLCHAIN_PATH": "/opt/qti-aic/",
      "_BATCH_SIZE": "1",
      "_SEG": "384"
    },
    "no_os_in_suggested_path": "yes",
    "no_ver_in_suggested_path": "yes",
    "package_name": "QAIC model",
    "skip_file_check": "yes"
  },
  "deps": {
    "model-source": {
      "local": "yes",
      "name": "Original model",
      "sort": 5,
      "tags": "model",
      "update_tags_if_env": {
        "resnet50,tf,mlperf,fix_input_shape": [
          {
            "_MODEL_TO_CONVERT": "compile_resnet50_tf"
          }
        ],
        "ssd-resnet34,onnx,mlperf,non-quantized,no-nms": [
          {
            "_MODEL_TO_CONVERT": "compile_ssd_resnet34_no_nms_mlperf"
          }
        ],
        "ssd-mobilenet,pytorch,mlperf,for.qaic": [
          {
            "_MODEL_TO_CONVERT": "compile_ssd_mobilenet_no_nms_mlperf"
          }
        ],
        "mlperf,bert-packed": [
          {
            "_MODEL_TO_CONVERT": ["compile_bert_99", "compile_bert_99.9"] 
          }
        ]
      }
    },
    "profile-resnet34": {
      "enable_if_env": [
        {
          "_MODEL_TO_CONVERT": [
            "compile_ssd_resnet34_no_nms_mlperf"
          ]
        }
      ],
      "local": "yes",
      "name": "SSD-Resnet34 Profile for QAIC model",
      "sort": 100,
      "tags": "profile,ssd_resnet34",
      "update_tags_if_env": {
        "first.5": [
          {
            "_CAL": "calibrate_first.5"
          }
        ]
      }
    },
    "profile-ssd_mobilenet": {
      "enable_if_env": [
        {
          "_MODEL_TO_CONVERT": [
            "compile_ssd_mobilenet_no_nms_mlperf"
          ]
        }
      ],
      "local": "yes",
      "name": "SSD-Mobilenet Profile for QAIC model",
      "sort": 100,
      "tags": "profile,ssd_mobilenet",
      "update_tags_if_env": {
        "bs.1": [
          {
            "_BATCH_SIZE": "1"
          }
        ],
        "bs.4": [
          {
            "_BATCH_SIZE": "4"
          }
        ],
        "bs.8": [
          {
            "_BATCH_SIZE": "8"
          }
        ],
        "first.5": [
          {
            "_CAL": "calibrate_first.5"
          }
        ]
      }
    },
    "profile-resnet50": {
      "enable_if_env": [
        {
          "_MODEL_TO_CONVERT": [
            "compile_resnet50_tf"
          ]
        }
      ],
      "local": "yes",
      "name": "Resnet50 Profile for QAIC model",
      "sort": 100,
      "tags": "profile,resnet50",
      "update_tags_if_env": {
        "bs.1": [
          {
            "_BATCH_SIZE": "1"
          }
        ],
        "bs.8": [
          {
            "_BATCH_SIZE": "8"
          }
        ],
        "bs.16": [
          {
            "_BATCH_SIZE": "16"
          }
        ],
        "first.5": [
          {
            "_CAL": "calibrate_first.5"
          }
        ]
      }
    },
    "profile-bert": {
      "enable_if_env": [
        {
          "_MODEL_TO_CONVERT": [
            "compile_bert_99"
          ]
        }
      ],
      "local": "yes",
      "name": "Bert Profile for QAIC model",
      "sort": 100,
      "tags": "profile,qaic,bert-packed",
      "update_tags_if_env": {
        "seg.384": [
          {
            "_SEG": "seg.384"
          }
        ],
        "seg.512": [
          {
            "_SEG": "seg.512"
          }
        ]
      }
    },
    "python": {
      "local": "yes",
      "name": "Python interpreter",
      "sort": 15,
      "tags": "compiler,python",
      "version_from": [
        3,
        4,
        0
      ]
    }
  },
  "end_full_path_universal": "elfs/constants.bin",
  "process_script": "install",
  "soft_uoa": "model.qaic",
  "suggested_path": "model-qaic-compiled",
  "tags": [
    "model",
    "qaic",
    "converted",
    "compiled",
    "compiled-by-qaic"
  ],
  "variations": {
    "first.5": {
      "extra_env": {
        "_CAL": "calibrate_first.5"
      }
    },
    "resnet50": {
      "extra_customize": {
        "package_name": "QAIC model (MLPerf ResNet50 TF)"
      },
      "extra_env": {
        "CK_CALIBRATE_IMAGENET": "yes",
        "CK_ENV_DATASET_PREPROCESSED_DIR": "$<<CK_ENV_DATASET_IMAGENET_PREPROCESSED_DIR>>$",
        "CK_ENV_DATASET_PREPROCESSED_FOF": "$<<CK_ENV_DATASET_IMAGENET_PREPROCESSED_SUBSET_FOF>>$",
        "ML_MODEL_MODEL_NAME": "resnet50",
        "_COMPILER_ARGS": "",
        "_MODEL_TO_CONVERT": "compile_resnet50_tf",
        "_OUTPUT_NODE_NAME": "-output-node-name=ArgMax"
      },
      "extra_tags": [
        "image-classification",
        "compiled-by-qaic",
        "calibrated-by-qaic"
      ]
    },
    "resnet50.aedk_25w.offline": {
      "extra_env": {
        "_BATCH_SIZE": "16",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -aic-num-of-instances=1 -use-producer-dma=0 -compiler-args='-aic-version -aic-single-device-partitioning=partitioner -aic-cluster-sizes=4,4 -aic-max-outchannel-split=1,4 -aic-enable-spill-fill-allocator=0 -aic-spill-large-buffers=0' -ols=4 -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.16"
      ]
    },
    "resnet50.aedk_20w.offline": {
      "extra_env": {
        "_BATCH_SIZE": "8",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -aic-num-of-instances=1 -use-producer-dma=0 -compiler-args='-aic-version -aic-single-device-partitioning=partitioner -aic-cluster-sizes=4,4 -aic-max-outchannel-split=1,4 -aic-enable-spill-fill-allocator=0 -aic-spill-large-buffers=0' -ols=4 -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.8"
      ]
    },
    "resnet50.aedk_20w.singlestream": {
      "extra_env": {
        "_BATCH_SIZE": "1",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -mos=4 -ols=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-enable-spill-fill-allocator=1 -aic-spill-large-buffers=1' -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.1"
      ]
    },
    "resnet50.aedk_15w.offline": {
      "extra_env": {
        "_BATCH_SIZE": "8",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -aic-num-of-instances=1 -use-producer-dma=0 -compiler-args='-aic-version -aic-single-device-partitioning=partitioner -aic-cluster-sizes=4,4 -aic-max-outchannel-split=1,4 -aic-enable-spill-fill-allocator=0 -aic-spill-large-buffers=0' -ols=4 -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.8"
      ]
    },
    "resnet50.aedk_15w.singlestream": {
      "extra_env": {
        "_BATCH_SIZE": "1",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -mos=4 -ols=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-enable-spill-fill-allocator=1 -aic-spill-large-buffers=1' -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.1"
      ]
    },
    "resnet50.pcie.14nsp": {
      "extra_env": {
        "_BATCH_SIZE": "8",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=14 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-single-device-partitioning=partitioner -aic-cluster-sizes=4,4,4,2 -aic-max-outchannel-split=1,1,4,2 -aic-enable-spill-fill-allocator=0 -aic-spill-large-buffers=0' -ols=2 -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.8"
      ]
    },
    "resnet50.pcie.16nsp": {
      "extra_env": {
        "_BATCH_SIZE": "8",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -aic-num-of-instances=1 -use-producer-dma=0 -compiler-args='-aic-version -aic-single-device-partitioning=partitioner -aic-cluster-sizes=4,4 -aic-max-outchannel-split=1,4 -aic-enable-spill-fill-allocator=0 -aic-spill-large-buffers=0' -ols=4 -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.8"
      ]
    },
    "resnet50.pcie.16nsp.singlestream": {
      "extra_env": {
        "_BATCH_SIZE": "1",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -mos=4 -ols=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-enable-spill-fill-allocator=1 -aic-spill-large-buffers=1' -aic-device-id=0 -output-node-name=ArgMax -compile-only"
      },
      "extra_tags": [
        "bs.1"
      ]
    },
    "ssd_resnet34": {
      "extra_customize": {
        "package_name": "QAIC model (MLPerf ResNet34 No NMS)"
      },
      "extra_env": {
        "CK_CALIBRATE_COCO": "yes",
        "CK_ENV_DATASET_PREPROCESSED_DIR": "$<<CK_ENV_DATASET_OBJ_DETECTION_PREPROCESSED_DIR>>$",
        "CK_ENV_DATASET_PREPROCESSED_FOF": "$<<CK_ENV_DATASET_OBJ_DETECTION_PREPROCESSED_SUBSET_FOF>>$",
        "ML_MODEL_MODEL_NAME": "ssd-resnet34",
        "_BATCH_SIZE": "1",
        "_MODEL_TO_CONVERT": "compile_ssd_resnet34_no_nms_mlperf",
        "_ENABLE_CHANNEL_WISE": "yes"
      },
      "extra_tags": [
        "object-detection",
        "calibrated-by-qaic",
        "no-nms",
        "bs.1"
      ]
    },
    "ssd_resnet34.aedk_20w.offline": {
      "extra_env": {
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-depth-first-mode=2 -aic-force-depth-first -aic-host-copy-vtcm=false -aic-disable-tcm-copy-opt  -aic-userdma-producer-dma' -compile-only -node-precision-info=[NODE_PRECISION_FILE]"
      }
    },
    "ssd_resnet34.aedk_20w.singlestream": {
      "extra_env": {
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=16 -mos=4 -ols=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-buffer-dealloc-delay=1' -compile-only -node-precision-info=[NODE_PRECISION_FILE]"
      }
    },
    "ssd_resnet34.aedk_15w.offline": {
      "extra_env": {
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-depth-first-mode=2 -aic-force-depth-first -aic-host-copy-vtcm=false -aic-disable-tcm-copy-opt  -aic-userdma-producer-dma' -compile-only -node-precision-info=[NODE_PRECISION_FILE]"
      }
    },
    "ssd_resnet34.aedk_15w.singlestream": {
      "extra_env": {
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -mos=4 -ols=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-buffer-dealloc-delay=1' -compile-only --node-precision-info=[NODE_PRECISION_FILE]"
      }
    },
    "ssd_resnet34.pcie.14nsp": {
      "extra_env": {
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-depth-first-mode=2 -aic-force-depth-first -aic-host-copy-vtcm=false -aic-disable-tcm-copy-opt  -aic-userdma-producer-dma' -compile-only -node-precision-info=[NODE_PRECISION_FILE]"
      }
    },
    "ssd_resnet34.pcie.16nsp": {
      "extra_env": {
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-depth-first-mode=2 -aic-force-depth-first -aic-host-copy-vtcm=false -aic-disable-tcm-copy-opt  -aic-userdma-producer-dma' -compile-only -node-precision-info=[NODE_PRECISION_FILE]"
      }
    },
    "ssd_resnet34.pcie.16nsp.singlestream": {
      "extra_env": {
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=16 -mos=4 -ols=1 -aic-num-of-instances=1 -compiler-args='-aic-version -aic-buffer-dealloc-delay=1' -compile-only --node-precision-info=[NODE_PRECISION_FILE]"
      }
    },
    "ssd_mobilenet": {
      "extra_customize": {
        "package_name": "QAIC model (MLPerf SSD-Mobilenet No NMS)"
      },
      "extra_env": {
        "CK_CALIBRATE_COCO": "yes",
        "CK_ENV_DATASET_PREPROCESSED_DIR": "$<<CK_ENV_DATASET_OBJ_DETECTION_PREPROCESSED_DIR>>$",
        "CK_ENV_DATASET_PREPROCESSED_FOF": "$<<CK_ENV_DATASET_OBJ_DETECTION_PREPROCESSED_SUBSET_FOF>>$",
        "ML_MODEL_MODEL_NAME": "ssd-mobilenet",
        "_MODEL_TO_CONVERT": "compile_ssd_mobilenet_no_nms_mlperf",
        "_ENABLE_CHANNEL_WISE": "yes"
      },
      "extra_tags": [
        "object-detection",
        "calibrated-by-qaic",
        "no-nms"
      ]
    },
    "ssd_mobilenet.aedk_20w.offline": {
      "extra_env": {
        "_BATCH_SIZE": "4",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=16 -mos=1 -ols=2 -use-producer-dma=1 -compiler-args='-aic-buffer-dealloc-delay=2 -aic-size-split-granularity=1048576 -aic-vtcm-working-set-limit-ratio=0.75 -aic-userdma-producer-dma'  -compile-only"
      },
      "extra_tags": [
        "bs.4"
      ]
    },
    "ssd_mobilenet.aedk_20w.singlestream": {
      "extra_env": {
        "_BATCH_SIZE": "1",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=16 -mos=1 -ols=2 -use-producer-dma=1 -compiler-args='-aic-buffer-dealloc-delay=2 -aic-size-split-granularity=1048576 -aic-vtcm-working-set-limit-ratio=0.75 -aic-userdma-producer-dma'  -compile-only"
      },
      "extra_tags": [
        "bs.1"
      ]
    },
    "ssd_mobilenet.aedk_15w.offline": {
      "extra_env": {
        "_BATCH_SIZE": "4",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -mos=1 -ols=2 -use-producer-dma=1  -compiler-args='-aic-buffer-dealloc-delay=2 -aic-size-split-granularity=1048576 -aic-vtcm-working-set-limit-ratio=0.75 -aic-userdma-producer-dma'  -compile-only"
      },
      "extra_tags": [
        "bs.4"
      ]
    },
    "ssd_mobilenet.aedk_15w.singlestream": {
      "extra_env": {
        "_BATCH_SIZE": "1",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=8 -mos=1 -ols=2 -use-producer-dma=1 -compiler-args='-aic-buffer-dealloc-delay=2 -aic-size-split-granularity=1048576 -aic-vtcm-working-set-limit-ratio=0.75 -aic-userdma-producer-dma'  -compile-only"
      },
      "extra_tags": [
        "bs.1"
      ]
    },
    "ssd_mobilenet.pcie.14nsp": {
      "extra_env": {
        "_BATCH_SIZE": "4",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=1 -mos=1 -ols=2 -use-producer-dma=1  -compiler-args='-aic-buffer-dealloc-delay=2 -aic-size-split-granularity=1048576 -aic-vtcm-working-set-limit-ratio=0.75 -aic-userdma-producer-dma'  -compile-only"
      },
      "extra_tags": [
        "bs.4"
      ]
    },
    "ssd_mobilenet.pcie.16nsp": {
      "extra_env": {
        "_BATCH_SIZE": "4",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=1 -mos=1 -ols=2 -use-producer-dma=1  -compiler-args='-aic-buffer-dealloc-delay=2 -aic-size-split-granularity=1048576 -aic-vtcm-working-set-limit-ratio=0.75 -aic-userdma-producer-dma'  -compile-only"
      },
      "extra_tags": [
        "bs.4"
      ]
    },
    "ssd_mobilenet.pcie.16nsp.singlestream": {
      "extra_env": {
        "_BATCH_SIZE": "1",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=16 -mos=1 -ols=2 -use-producer-dma=1  -compiler-args='-aic-buffer-dealloc-delay=2 -aic-size-split-granularity=1048576 -aic-vtcm-working-set-limit-ratio=0.75 -aic-userdma-producer-dma'  -compile-only"
      },
      "extra_tags": [
        "bs.1"
      ]
    },
    "bert": {
      "extra_customize": {
        "package_name": "BERT model"
      },
      "extra_env": {
        "_BATCH_SIZE": "0"
      },
      "extra_tags": [
        "bert"
      ]
    },
    "bert-99": {
      "extra_env": {
        "_MODEL_TO_CONVERT": "compile_bert_99",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=4 -execute-nodes-in-fp16=Mul,Sqrt,Div,Add,ReduceMean,Split,Softmax,Sub,Gather,Erf,Pow,Concat,Tile,LayerNormalization -quantization-schema=symmetric_with_uint8 -quantization-precision=Int8  -quantization-precision-bias=Int32 -use-producer-dma=1 -compiler-args='-onnx-define-symbol=batch_size,1 -onnx-define-symbol=seg_length,[SEG] -aic-form-axis-uniform-constants -aic-ddr-to-multicast -aic-userdma-producer-dma' -compile-only"
      },
      "extra_tags": [
        "calibrated-by-qaic",
        "bert.mixed"
      ]
    },
    "bert-99.singlestream": {
      "extra_env": {
        "_MODEL_TO_CONVERT": "compile_bert_99",
        "_COMPILER_PARAMS": "-aic-hw -aic-hw-version=2.0 -aic-num-cores=16 -execute-nodes-in-fp16=Mul,Sqrt,Div,Add,ReduceMean,Split,Softmax,Sub,Gather,Erf,Pow,Concat,Tile,LayerNormalization -quantization-schema=symmetric_with_uint8 -quantization-precision=Int8  -quantization-precision-bias=Int32 -use-producer-dma=1 -compiler-args='-onnx-define-symbol=batch_size,1 -onnx-define-symbol=seg_length,[SEG] -aic-form-axis-uniform-constants -aic-ddr-to-multicast -aic-userdma-producer-dma' -compile-only"
      },
      "extra_tags": [
        "calibrated-by-qaic",
        "bert.mixed"
      ]
    },
    "bert-99.9": {
      "extra_env": {
        "_NO_QUANTIZATION" : "yes",
        "_MODEL_TO_CONVERT": "compile_bert_99.9",
        "_COMPILER_PARAMS": "-convert-to-fp16  -aic-hw -aic-num-cores=4 -mos=4 -ols=1  '-compiler-args=-aic-perf-metrics -aic-time-passes -aic-version -aic-ddr-to-multicast -aic-form-axis-uniform-constants -aic-userdma-producer-dma -onnx-define-symbol=batch_size,1 -onnx-define-symbol=seg_length,384'  -compile-only"
      },
      "extra_tags": [
        "bert.fp16"
      ]
    },
    "bs.1": {
      "extra_env": {
        "_BATCH_SIZE": "1"
      }
    },
    "bs.4": {
      "extra_env": {
        "_BATCH_SIZE": "4"
      }
    },
    "bs.8": {
      "extra_env": {
        "_BATCH_SIZE": "8"
      }
    },
    "bs.16": {
      "extra_env": {
        "_BATCH_SIZE": "16"
      }
    },
    "quantization.calibration": {
      "extra_env": {
        "_PERCENTILE_CALIBRATION_VALUE": "99.9980",
        "_QUANTIZATION_PARAMS": "-quantization-calibration=Percentile  -percentile-calibration-value=[PERCENTILE_CALIBRATION_VALUE]"
      }
    },
    "seg.384": {
      "extra_env": {
        "_SEG": "384"
      }
    },
    "seg.512": {
      "extra_env": {
        "_SEG": "512"
      }
    }
  }
}
